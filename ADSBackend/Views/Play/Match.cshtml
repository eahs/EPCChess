@model ADSBackend.Models.PlayViewModels.MatchViewModel

@{

    ViewData["Title"] = Model.Match.HomeSchool.Name + " vs " + Model.Match.AwaySchool.Name;


}

<ol class="breadcrumb">
    <li class="breadcrumb-item">
        <a asp-controller="Admin" asp-action="Index">Home</a>
    </li>
    <li class="breadcrumb-item">
        <a asp-controller="Play" asp-action="Index">My Team Matches</a>
    </li>
    <li class="breadcrumb-item active">
        <strong>@ViewData["Title"]</strong>
    </li>
</ol>

<h2>Match: @ViewData["Title"]</h2>


@section Scripts {

    <script src="~/lib/signalr/jquery.signalR.min.js"></script>
    
    <script type="text/javascript">

        var connection = new signalR.HubConnectionBuilder().withUrl("/gamehub").build();

//Disable send button until connection is established
        document.getElementById("sendButton").disabled = true;

        connection.on("ReceiveMessage", function (user, message) {
        });

        connection.start().then(function () {
            document.getElementById("sendButton").disabled = false;
        }).catch(function (err) {
            return console.error(err.toString());
        });

        document.getElementById("sendButton").addEventListener("click", function (event) {
            var user = document.getElementById("userInput").value;
            var message = document.getElementById("messageInput").value;
            connection.invoke("SendMessage", user, message).catch(function (err) {
                return console.error(err.toString());
            });
            event.preventDefault();
        });

    </script>
} 